require("../common/common.js");
require('../common/common.js');
global.webpackJsonp([0],{BrSd:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=e("mFol"),r=e("GL3H"),n=e("5nAL"),h=e.n(n);var s=function(t){e("Vs2N")},a=e("D3hA")(o.a,r.a,s,null,null);i.default=a.exports,o.a.mpType="component",new h.a(o.a).$mount()},GL3H:function(t,i,e){"use strict";var o={render:function(){var t=this.$createElement,i=this._self._c||t;return i("div",[i("canvas",{ref:"tag"})])},staticRenderFns:[]};i.a=o},Vs2N:function(t,i){},mFol:function(t,i,e){"use strict";i.a={name:"tag-canvas",props:{width:{type:Number|String,default:"auto"},height:{type:Number|String,default:"auto"},padding:{type:Array,default:function(){return[5,2]}},text:{type:String,default:"猜猜我是谁"},fontSize:{type:Number|String,default:10},bgColor:{type:String,default:"#F63"},fontColor:{type:String,default:"#fff"},borderRadius:{type:Number|String,default:0},borderWidth:{type:Number|String,default:0},borderColor:{type:String,default:"#fff"}},data:function(){return{option:{},canvas:null,context:null}},computed:{realSize:function(){return{width:this.option.width*this.ratio,height:this.option.height*this.ratio,borderWidth:this.option.borderWidth*this.ratio,borderRadius:this.option.borderRadius*this.ratio}},ratio:function(){return(window.devicePixelRatio||1)/(this.context.webkitBackingStorePixelRatio||this.context.mozBackingStorePixelRatio||this.context.msBackingStorePixelRatio||this.context.oBackingStorePixelRatio||this.context.backingStorePixelRatio||1)}},mounted:function(){this.canvas=this.$refs.tag,this.context=this.canvas.getContext("2d"),this.option={width:"auto"===this.width?this.getWidth(this.text)+2*this.formatToPx(this.padding[0]):this.formatToPx(this.width),height:"auto"===this.height?this.getHeight(this.text)+2*this.formatToPx(this.padding[1]):this.formatToPx(this.height),text:this.text,fontSize:this.formatToPx(this.fontSize),bgColor:this.bgColor,fontColor:this.fontColor,borderRadius:this.formatToPx(this.borderRadius),borderWidth:this.formatToPx(this.borderWidth),borderColor:this.borderColor},this.scaling(),this.drawRoundedRect(this.context,0,0,this.realSize.width,this.realSize.height,this.realSize.borderRadius,this.bgColor,this.borderColor,this.realSize.borderWidth),this.drawText(this.text)},methods:{drawRoundedRect:function(t,i,e,o,r,n,h,s,a){var d=i+a/this.ratio,l=e+a/this.ratio,u=o-a,c=r-a;t.save(),t.beginPath(),t.moveTo(d+n,l),t.arcTo(d+u,l,d+u,l+n,n),t.arcTo(d+u,l+c,d+u-n,l+c,n),t.arcTo(d,l+c,d,l+c-n,n),t.arcTo(d,l,d+n,l,n),h&&(t.fillStyle=h,t.fill()),s&&(t.strokeStyle=s,t.lineWidth=a,t.stroke()),t.restore()},drawText:function(t){this.context.textAlign="center",this.context.textBaseline="middle",this.context.font=this.fontSize*this.ratio+"px PingFangSC-Regular",this.context.fillStyle=this.fontColor,this.context.fillText(t,this.realSize.width/2,this.realSize.height/2)},scaling:function(){this.canvas.width=this.realSize.width,this.canvas.height=this.realSize.height,this.canvas.style.width=this.realSize.width/this.ratio+"px",this.canvas.style.height=this.realSize.height/this.ratio+"px"},getWidth:function(t){return this.context.measureText(t).width},getHeight:function(t){var i=this.context.measureText("W").width;return i+i/6},formatToPx:function(t){if(this.isNumber(t))return t;var i=parseFloat(t.match(/[0-9.]*/g)[0]);if(/^[0-9.]*$/g.test(t))return i;if(/[0-9.]*px$/g.test(t))return i;if(/[0-9.]*rem$/g.test(t)){var e=parseFloat(getComputedStyle(document.querySelector("html")).fontSize.match(/[0-9.]*/g)[0]);return console.log(e),i*e}console.error("请保证输入的参数是数字或者rem或者px")},isNumber:function(t){return"number"==typeof t&&!isNaN(t)}}}}},["BrSd"]);